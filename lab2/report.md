# 文档检索

计54 马子轩 2015012283 计65 尹思程 2016011354

## 分组信息

马子轩 尹思程

## 算法实现

### 空间向量模型

简单来说，空间向量模型就是将查询和文档都看作向量，然后按照向量距离进行选择

我使用了余弦距离作为测量距离

文本到向量的映射，我使用了单词在文档中的的tf*idf作为向量

实现上，直接查询查询词在文档中的tf. 计算tf*idf^2并求和，再除以两个向量的模长即可。
$$
S(Q,D) = \frac{\sum_{q\in Q}idf(q)^2tf(q)}{\sqrt{\sum_{q\in Q}q^2}\sqrt{\sum_{d\in D}d^2}}
$$


### 概率模型

概率模型简单来说就是通过所有词的出现概率，计算一个相关度，并求和。其中，系数k是为了平衡文档长度对出现次数的影响。
$$
S(Q,D)=\sum_{q\in Q}\frac{idf(q)tf(q)(k_1+1)}{tf(q)K}
$$

$$
K=k1(1-b+b\frac{dl}{avgdl})
$$



### 模型评估

模型评估采用nDCG方法
$$
dcg=\sum_{i=1}^n\frac{rev(i)}{log(1+i)}
$$
idcg为最优情况的dcg值
$$
ndcg=\frac{dcg}{idcg}
$$
这样只需要对结果文件和label文件进行扫描，即可得到ndcg值



## 文件结构

```
data/
vsm.py
bm25.py
measure.py
vsmres.txt
bm25res.txt
```

data文件夹存放所有给定的数据

vsm.py和bm25.py为两种算法的实现

vsmres.txt和bm25res.txt为两种算法的结果

measure计算nDCG@(5, 10, 20)的实现



## 实验结果

| model | nDCG@5 | nDCG@10 | nDCG@20 |
| ----- | ------ | ------- | ------- |
| VSM   | 0.3506 | 0.3417  | 0.3474  |
| BM25  | 0.4527 | 0.4785  | 0.5221  |

在使用默认参数的情况下，BM25算法能够带来比VSM算法更好的结果。而在我的实现中，两种算法有相同的复杂度，因此应该优先使用BM25算法。






$$

$$
s(Q, D) = /sigma{}



